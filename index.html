<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Boss Night Team Builder</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="app">
    <header class="header">
      <h1>⚔️ Boss Night Team Builder</h1>
      <p class="tagline">Import sign-ups, set priority, generate teams, drag to adjust, then copy into Discord.</p>
    </header>

    <div class="main-layout">
      <!-- Left: Import + Character list sidebar -->
      <aside class="sidebar">
        <section class="card">
          <h2>1. Import</h2>
          <p class="hint">One line per player: <code>@Name (Vocation) BossCodes</code></p>
          <textarea id="import-text" class="import-textarea"
            placeholder="@Alice (EK) PZFHL&#10;Bob (MS) PZ (ED) F"></textarea>
          <div class="row">
            <button type="button" class="btn btn-primary" id="btn-import">Import</button>
            <span id="import-status" class="status"></span>
          </div>
        </section>
        <section class="card sidebar-characters" id="sidebar-characters">
          <h2>Imported characters</h2>
          <p class="hint">Set <strong>priority</strong>: 0 = highest (picked first), 1, 2, etc.</p>
          <div id="sidebar-list" class="sidebar-list"></div>
        </section>
      </aside>

      <!-- Right: Generate + Teams -->
      <main class="content">
        <section class="card info-box">
          <h2>ℹ️ How teams are built</h2>
          <p><strong>Selection order:</strong> The script picks players in this order: first by
            <strong>priority</strong> (0 = highest, picked first), then by <strong>vocation preference</strong> if you
            signed up with multiple vocations for the same boss, then by name. Anyone who doesn’t fit in a team becomes
            a <strong>back-up</strong>.</p>
          <p><strong>Complete team:</strong> A team that meets the minimum vocation and size rules below. If there
            aren’t enough sign-ups, a <strong>partial team</strong> is still shown (with ⚠️); you can use it or adjust
            manually.</p>
          <p><strong>Underfilled teams:</strong> If you ask for 2 teams but one ends up with very few players (e.g. only
            1), the script merges everyone into one team, puts the lowest-priority overflow in back-up, and hides the
            empty team.</p>
          <h3>Requirements per boss (complete teams)</h3>
          <p class="info-box-hint">“Shooters” = MS + RP combined. “Max” = team size. “Min” = minimum of that vocation.
          </p>
          <ul class="requirements-list">
            <li><strong>Pale (P)</strong> — Max 10 players. Minimum 1 EK, 1 ED, and at least 2 shooters (MS + RP
              combined).</li>
            <li><strong>Zelos (Z)</strong> — Max 10 players. Minimum 2 EK (max 3), 2 ED, 2 MS, 2 RP. If you have 3 EKs
              you also need at least 3 EDs and 1 RP.</li>
            <li><strong>Ferumbras (F)</strong> — Max 15 players. Minimum 2 EK, 2 ED, at least 1 MS, and at least 3
              shooters (MS + RP) in total.</li>
            <li><strong>Heart of Destruction (H)</strong> — Max 15 players. Minimum 3 EK (max 6), 3 ED, at least 1 MS,
              and at least 5 shooters in total. Team is split into 3 groups: Left, Middle, Right (5 each).</li>
            <li><strong>Last Lore Keeper (L)</strong> — Max 15 players. Minimum 4 EK, 4 ED, at least 1 MS, and at least
              5 shooters in total. Team is split into 4 groups: Top Left, Top Right, Bottom Left, Bottom Right.</li>
            <li><strong>Cults (C)</strong> — Max 10 players. Minimum 1 EK, 1 ED, 1 RP, and at least 2 shooters in total.
            </li>
            <li><strong>The First Dragon (D)</strong> — Max 15 players. Minimum 2 EK and 2 ED.</li>
          </ul>
          <h3>Preferred setup</h3>
          <p>Teams are filled up to the boss size (10 or 15) while respecting the min/max per vocation. For
            <strong>HoD</strong> the team is shown as three boxes (Left, Middle, Right); for <strong>LLK</strong> as
            four boxes (Top Left, Top Right, Bottom Left, Bottom Right). The copy text for each team is one combined
            message with those sections inside it.</p>
        </section>
        <section class="card">
          <h2>2. Generate teams</h2>
          <p class="hint">Boss codes + count: <code>P2 Z1 F1</code> = 2 Pale, 1 Zelos, 1 Feru.</p>
          <div class="row">
            <input type="text" id="team-codes" class="input-codes" placeholder="P2 Z1 F1 H1 L1 C1"
              value="P2 Z1 F1 H1 L1 C1">
            <button type="button" class="btn btn-primary" id="btn-generate">Generate teams</button>
          </div>
          <div id="generate-status" class="status"></div>
        </section>

        <section class="card hidden" id="step-preview">
          <h2>3. Preview &amp; copy</h2>
          <p class="hint">Drag players between teams. Empty teams are ignored when you copy. Always one extra team slot
            so you can add more.</p>
          <div id="teams-preview" class="teams-preview"></div>
          <div class="row actions">
            <button type="button" class="btn btn-secondary" id="btn-regen">Regenerate</button>
            <button type="button" class="btn btn-primary" id="btn-copy">Copy formatted text</button>
            <span id="copy-status" class="status"></span>
          </div>
          <div class="output-section">
            <label>Copy per team (paste into Discord)</label>
            <div id="output-boxes" class="output-boxes"></div>
            <label for="output-text">Full formatted text</label>
            <textarea id="output-text" class="output-textarea" readonly></textarea>
          </div>
        </section>
      </main>
    </div>
  </div>
  <script src="app.js"></script>
</body>

</html>